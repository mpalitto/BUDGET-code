{"version":3,"sources":["../../src/pages/tabs/tabs.module.ts","../../src/pages/tabs/tabs.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TabsPage } from './tabs';\n\n@NgModule({\n  declarations: [TabsPage],\n  imports: [IonicPageModule.forChild(TabsPage)],\n  entryComponents: [TabsPage]\n  //exports: [TabsPage]\n})\nexport class TabsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.module.ts","import { Component } from '@angular/core';\nimport { Events, ModalController, IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { MainHubProvider } from './../../providers/main-hub/main-hub';\n\n@IonicPage({name: \"TabsPage\"})\n@Component({\n  templateUrl: 'tabs.html'\n})\n\nexport class TabsPage {\n  page = \"Home\";\n  userSelection = \"\";\n  user     = \"\";\n  userNick = '';\n  currentGroupID = \"\";\n  groupIDs = [];\n  groupNames = {}; // {groupID: groupName}\n  amIadmin = {};   // {groupID: amIadmin}\n  showBUT = false; // sho buttons for group editing\n\n  selectOptions = {\n      title: 'Are you sure?'\n  }\n\n  tab1Root = 'HomePage';\n  tab2Root = 'InvitationsPage';\n  tab3Root = 'ContactPage';\n  tab4Root = 'AboutPage';\n\n  constructor(private events: Events, public modalCtrl: ModalController, public navCtrl: NavController, public navParams: NavParams, private mainHUB: MainHubProvider) {\n\n    this.userNick = navParams.get('nick');\n    this.user = navParams.get('email');\n\n    this.events.subscribe('newGrpAdded', (id, name) => {\n      this.groupIDs.push(id);\n      this.groupNames[id] = name;\n      this.amIadmin[id] = true;\n      this.currentGroupID = id;\n      this.events.publish('change-group', this.currentGroupID, this.groupNames[this.currentGroupID], this.amIadmin[this.currentGroupID]);\n    });\n\n   this.events.subscribe('invites', (invites) => {\n     alert('INVITES sub'+JSON.stringify(invites));\n\nlet modal = this.modalCtrl.create('alerts', {groupName: invites});\n      modal.onDidDismiss(data => {});\n \tmodal.present();\n    });\n\n    this.events.subscribe('editGRP', (gn) => {\n      this.editGroup(gn);\n    });\n\n    this.events.subscribe('tab2opened', () => {\n      this.events.publish('userInfo', this.userNick, this.user);\n      this.events.publish('change-group', this.currentGroupID, this.groupNames[this.currentGroupID], this.amIadmin[this.currentGroupID]);\n      this.showBUT = true;\n    });\n\n    this.mainHUB.getAllGroups(this.user).then(data => {\n      // alert('DATA: '+JSON.stringify(data));\n      for (var i = 0; i < data.length; i++) {\n        this.groupIDs.push(data[i].groupID);\n        this.groupNames[data[i].groupID] = data[i].groupName;\n        this.amIadmin[data[i].groupID] = (data[i].privilege == 'admin');\n        // alert('groupID: ' + data[i].groupID + ' groupName: ' + data[i].groupName);\n      }\n      this.mainHUB.getUserInfo(this.user).then(data => {\n        this.currentGroupID = data.defaultGroupID;\n        // alert('current: '+data.defaultGroupID);\n      });\n    });\n\n    // send invite\n    let invite = {\n      FROM: this.user,\n      FOR: \"wife@gmail.com\",\n      GROUP: \"NEW-GROUP\"\n    }\n    mainHUB.send('invite', invite); //request for any new invitation to server\n\n    // send invite\n    invite = {\n      FROM: \"nicolo@gmail.com\",\n      FOR: \"mpalitto@gmail.com\",\n      GROUP: \"NEW-GROUP\"\n    }\n    mainHUB.send('invite', invite); //request for any new invitation to server\n\n    // send anyInvites query\n    let userID = {\n      userID: this.user,\n    }\n    mainHUB.send('anyInvites', userID); //request for any new invitation to server\n\n    let data = {\n      from: 'Matteo',\n      to  : 'all',\n      cmd : \"Hi\"\n    };\n    mainHUB.send('message', data);\n  } // end constructor\n\n\n  public logout() {\n    //alert('logging OUT');\n    this.mainHUB.logout().subscribe(succ => {\n      this.navCtrl.popToRoot();\n    });\n  }\n\n  selectGroup() {\n    alert('change-group: '+' <--> '+this.currentGroupID+' <--> '+this.groupNames[this.currentGroupID]+' <--> '+this.amIadmin[this.currentGroupID]);\n    this.events.publish('change-group', this.currentGroupID, this.groupNames[this.currentGroupID], this.amIadmin[this.currentGroupID]);\n  }\n\n  editGroup(gn) {\n      let modal = this.modalCtrl.create('EditGroupPage', {groupName: gn});\n      modal.onDidDismiss(data => {\n        // alert(JSON.stringify(data)); alert('NEW NAME: '+data.newName);\n\n        // UPDATE\n        if (data.button === 'update') {\n          this.mainHUB.updateGroupName(this.currentGroupID, data.newName).then(newName => {\n            // alert(this.groupName+' has been RENAMED to: '+ newName);\n            // this.loadGroupMembers();\n            this.groupNames[this.currentGroupID] = newName;\n            this.selectGroup();\n            //this.events.publish('grpUpdated');\n          });\n\n        // ADD NEW GROUP\n        } else if (data.button === 'create') {\n          this.currentGroupID = this.user + '-' + data.newName.replace(/ /g,'-');\n          this.groupIDs.push(this.currentGroupID);\n          this.groupNames[this.currentGroupID] = data.newName;\n          this.amIadmin[this.currentGroupID] = true;\n          this.events.publish('addNewMember', this.currentGroupID, this.groupNames[this.currentGroupID], this.userNick, this.user, 'admin', '6');\n          this.selectGroup();\n        } // end elseif\n      }); // end modal.onDismiss\n      modal.present();\n  } // end editGroup\n\n} // end class\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts"],"sourceRoot":""}